<?xml version="1.0" encoding="utf-8"?>
<!--
    Lita: A free and open source SQLite database administration tool for Windows, MacOSX and Linux.
    Copyright (C) 2010  David Deraedt

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
<mx:TitleWindow xmlns:adobe="http://www.adobe.com/2006/fc" xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:components="com.dehats.flex.controls.*"
	creationComplete=" focusManager.setFocus(tableNameTi) "	
	showCloseButton="true"
	close=" closeMe()"
	title="Create a new Table">
		   
	<mx:Script>
		<![CDATA[
			import mx.managers.PopUpManager;
			import mx.events.CloseEvent;
			import com.dehats.sqla.model.presentation.MainPM;
			import com.dehats.air.sqlite.SQLType;
			import com.dehats.sqla.model.MainModel;
//			import com.dehats.air.SQLiteDBHelper;


			public var mainPM:MainPM;
			
			private function closeMe():void
			{
				PopUpManager.removePopUp(this);
			}

			private function createTable():void
			{

				var colDef:String=colNameTi.text + ' ' + dataTypeTi.text;

				if (primaryCb.selected)
					colDef+=" PRIMARY KEY";
				if (incrementCb.selected)
					colDef+=" AUTOINCREMENT";

				mainPM.createTable(tableNameTi.text, colDef);

				closeMe();
			}
		]]>
	</mx:Script>
	<mx:Form defaultButton="{createBt}"
			 x="0"
			 y="0">
		<mx:FormItem label="Table name">
			<mx:TextInput id="tableNameTi"/>
		</mx:FormItem>
		<mx:FormItem>
			<mx:Label text="First Field"/>
		</mx:FormItem>
		<mx:FormItem label="Field Name">
			<mx:TextInput id="colNameTi"
						  text="{ tableNameTi.text+'id' }"/>
		</mx:FormItem>
		<mx:FormItem label="Field Type">
			<!--		<mx:TextInput id="dataTypeTi" text="INTEGER"/>	-->
			<components:AutoComplete id="dataTypeTi"
								creationComplete="dataTypeTi.text='INTEGER'"			
								dataProvider="{ SQLType.AFFINITY_TYPES}"								
								text="INTEGER"/>
		</mx:FormItem>
		<mx:FormItem>
			<mx:CheckBox id="primaryCb"
						 label="Primary Key"
						 selected="true"/>
		</mx:FormItem>
		<mx:FormItem>
			<mx:CheckBox id="incrementCb"
						 label="Auto increment"
						 selected="true"/>
		</mx:FormItem>
		<mx:FormItem>
			<mx:Button click=" createTable()"
					   enabled="{tableNameTi.text.length>0}"
					   id="createBt"
					   label="Create"/>
		</mx:FormItem>
	</mx:Form>
</mx:TitleWindow>
